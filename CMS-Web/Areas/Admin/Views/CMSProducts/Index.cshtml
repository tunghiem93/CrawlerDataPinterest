@model CMS_DTO.CMSProduct.CMS_ProductsModels
    @using CMS_Shared
@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
@{
    ViewBag.Title = "Sản phẩm - Danh sách";
}
<style>
    body{
        overflow-x:hidden;
    }

    .info {
        /*margin-left:20px;*/
    }
    .img-responsive{
        height:236px;
    }
</style>
<div role="main">
    <div class="se-pre-con" style="display: none;"></div>
    <div class="_gridview">
        <div class="page-title">
            <!-- BEGIN PAGE BAR -->
            @Html.Partial("_breadcrumb", new Dictionary<string, string> { { "A", "Trang chủ" }, { "B", "Sản phẩm - Danh sách" } })
            <!-- END PAGE BAR -->
        </div>
        <div class="page-main">
            @using (Html.BeginForm("Search", "CMSProducts", FormMethod.Get, new { @class = "form-horizontal search-form", @id = "form-search" }))
            {
                <fieldset>
                    <legend>Nhóm mục từ khóa quét</legend>
                </fieldset>
                <div class="form-group">
                    <label for="FromDate" class="col-md-1 col-sm-3 col-xs-12 control-label">Thời gian</label>
                    <div class="col-md-2 col-sm-2 col-xs-12 " style="width:13% !important">
                        <div class="input-prepend input-group" style="width:100%">
                            @Html.DropDownListFor(model => model.TypeTime,
                                new SelectList(Model.ListTime, "Value", "Text", Model.TypeTime), "",
                                new
                                {
                                    @class = "form-control select2_multiple",
                                    @id = "storeDdlView",
                                    @style = "width:100%;",
                                    @onChange = "ChangeDatetime(this);"
                                })
                            @Html.ValidationMessageFor(model => model.TypeTime, null, new { @class = "label" })
                        </div>
                    </div>
                    <label for="CustomeFromDate" class="col-md-1 col-sm-3 col-xs-12 control-label clsDate">Từ</label>
                    <div class="col-md-2 col-sm-3 col-xs-12 clsDate" style="width:13% !important">
                        @Html.TextBoxFor(model => model.FromDate, new { @class = "form-control datepicker1 has-feedback-left", @placeholder = "Từ ngày", @autocomplete = "off" })
                        @Html.ValidationMessageFor(model => model.FromDate, null, new { @class = "label label-danger" })
                    </div>

                    <label for="CustomeFromDate" class="col-md-1 col-sm-3 col-xs-12 control-label clsDate">Đến</label>
                    <div class="col-md-2 col-sm-3 col-xs-12 clsDate" style="width:13% !important">
                        @Html.TextBoxFor(model => model.ToDate, new { @class = "form-control datepicker1 has-feedback-left", @placeholder = "Từ ngày", @autocomplete = "off" })
                        @Html.ValidationMessageFor(model => model.ToDate, null, new { @class = "label label-danger" })
                    </div>
                    <label for="ToDate" class="col-md-1 col-sm-1 col-xs-12 control-label">Số lượng</label>
                    <div class="col-md-2 col-sm-2 col-xs-12 " style="width:13% !important">
                        <div class="input-prepend input-group" style="width:100%">
                            @Html.DropDownListFor(model => model.TypeQuantity,
                                new SelectList(Model.ListQuantity, "Value", "Text", Model.TypeQuantity), "",
                                new
                                {
                                    @class = "form-control select2_multiple",
                                    @id = "storeDdlViewQuantity",
                                    @style = "width:100%;"
                                })
                            @Html.ValidationMessageFor(model => model.TypeQuantity, null, new { @class = "label" })
                        </div>
                        @Html.ValidationMessageFor(model => model.Board, null, new { @class = "label" })
                    </div>
                    <div class="form-group">
                        <div class="col-md-1 col-sm-1 col-xs-12" style="width:4% !important">
                            <button class="btn btn-primary"  id="form-search"><i class="fa fa-search"></i>&nbsp;Load Data</button>
                        </div>
                    </div>
                </div>
            }
            @*<div class="gridview" style="height:100%;"></div>*@
        </div>
    </div>
    <div class="detail-view" style="height:100%;display:inline-block">
        <fieldset>
            <legend>Danh sách kết quả tìm kiếm</legend>
        </fieldset>
        @Html.Partial("_ListItem", Model.Crawler)
        <!-- detail partial view -->
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('.datepicker1').daterangepicker({
            singleDatePicker: true,
            calender_style: "picker_2",
            maxDate: new Date(),
            //==========
            showDropdowns: true,
            locale: {
                format: 'DD/MM/YYYY',
                daysOfWeek: ['CN', 'Hai', 'Ba', 'Tư', 'Năm', 'Sáu', 'Bảy'],
                monthNames: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12']
            }
        }, function (start, end, label) {
        });

        $("#storeDdlView").select2({
            placeholder: '@Html.Raw("Vui lòng chọn")',
        });

        $("#storeDdlViewQuantity").select2({
                placeholder: '@Html.Raw("Vui lòng chọn")',
        });
        if ('@Model.TypeTime' == @Convert.ToInt16(Commons.ETimeType.TimeCustom.ToString("d")))
        {
            $(".clsDate").show();
        }
        else {
            $(".clsDate").hide();
        }
    })

    $("#form-search").on("click").submit(function (e) {
        $.ajax({
            beforeSend: function () {
                $('.se-pre-con').show();
            },
            url: $(this).attr('action'),
            type: "post",
            dataType: 'html',
            data: new FormData(this),
            processData: false,
            contentType: false,
            success: function (data) {
                $('.detail-view').html(data);
            },
            complete: function () {
                $('.se-pre-con').hide();
            },
            error: function (jqXHR, textStatus, errorThrown) {
              //  $(".detail-view").html(jqXHR.responseText);
            }
        });
        e.preventDefault();
    });

    function ChangeDatetime(that)
    {
        var _value = $(that).val();
        if (_value == @Commons.ETimeType.TimeCustom.ToString("d"))
        {
            $(".clsDate").show();
        }
        else {
            $(".clsDate").hide();
        }
    }
</script>